{% extends "main/base.html" %}
{% load static %}

{% block extracss %}
    <link rel="stylesheet" href="{% static 'main/css/catalog.css' %}">
{% endblock extracss %}

{% block content %}
    <h2>{{ page_name}}</h2>
    <form action="" method="get" class="price-filter">
        <h3>Пошук:</h3>
        <input
          type="text"
          name="search"
          value="{{ request.GET.search }}"
          placeholder="Пошук товарів"
          id="search"
          class="search-input"
        />
        <h3>Фільтр за ціною:</h3>
        <label for="min_price">Від:</label>
        <input type="number" name="min_price" id="min_price" value="{{ request.GET.min_price }}" placeholder="Min ціна">
        <label for="max_price">До:</label>
        <input type="number" name="max_price" id="max_price" value="{{ request.GET.max_price }}" placeholder="Max ціна">
        <button type="submit" class="btn">Знайти</button>
    </form>
    <div class="wrapper">
        {% for product in products %}
            <a href="{{ product.get_absolute_url }}">
                <div class="product-card">
                    <img src="{{ product.img }}" alt="{{ product.name }}" class="image">
                    <p class="name">{{ product.name }}</p>
                    <p class="brand">Бренд: {{ product.brand.name }}</p>
                    {% if product.discount %}
                        <div class="price-block discont">
                            <p class="line">{{ product.price }}</p>
                            <p >Ціна:<span class="price">{{ product.sell_price }}  грн</span></p>
                        </div>
                    {% else %}
                    <div class="price-block">
                        <p class="price">Ціна: {{ product.price }} грн</p>
                    </div>
                    {% endif %}
                    <button class="btn">Детально</button>
                </div>
            </a>
        {% endfor %}
    </div>

{% endblock content %}
